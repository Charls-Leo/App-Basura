<!-- Header -->
<div class="header">
  <div class="logo-section" (click)="irDashboard()" style="cursor: pointer;">

    <span class="logo-icon">â™»ï¸</span>
    <span class="logo-text">EcoRecolecta</span>
  </div>
  <div class="page-title">ğŸ“ Mapa de Rutas</div>
</div>

<!-- Contenedor principal -->
<div class="map-container">

  <!-- Sidebar izquierda: rutas activas -->
  <div class="sidebar">
    <div class="sidebar-header">
      <h2>Rutas Activas</h2>
      <p>Gestiona y visualiza todas tus rutas</p>
    </div>

    <!-- ğŸŸ© LISTA DINÃMICA DE RUTAS -->
    <div class="routes-list">

      <!-- Si no hay rutas -->
      <div *ngIf="rutas.length === 0" class="route-card empty">
        <div class="route-header">
          <span class="route-name">AÃºn no hay rutas creadas</span>
        </div>
        <div class="route-info">
          <span class="route-info-item">
            Usa el botÃ³n "Crear Ruta" para registrar la primera.
          </span>
        </div>
      </div>

      <!-- Rutas reales -->
      <div
        class="route-card"
        *ngFor="let ruta of rutas"
        (click)="mostrarRuta(ruta)"
      >
        <div class="route-header">
          <span class="route-name">ğŸš› {{ ruta.nombre_ruta }}</span>
        </div>

        <div class="route-info">
          <span class="route-info-item">
            ğŸ“ {{ ruta.shape.coordinates.length || 0 }} puntos
          </span>
        </div>
      </div>
    </div>
    <!-- FIN LISTA DINÃMICA -->

  </div> <!-- FIN SIDEBAR -->

  <!-- Centro: mapa -->
  <div id="mapContainer"></div>

  <!-- Panel derecho: resumen + controles -->
  <div class="right-panel">

    <!-- Stats -->
    <div class="stats-panel">
      <div class="stat-card">
        <div class="stat-value">{{ rutas.length }}</div>
        <div class="stat-label">Rutas Totales</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">
          {{ rutas.length > 0 ? (rutas[0].shape?.coordinates?.length || 0) : 0 }}
        </div>
        <div class="stat-label">Puntos Totales</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">â€“</div>
        <div class="stat-label">Activas Ahora</div>
      </div>
    </div>

    <!-- Controles -->
    <div class="controls-panel">
      <button class="control-btn primary btn-create-route" (click)="onCrearRuta()">
        â• Crear Ruta
      </button>

      <button class="control-btn" (click)="guardarRuta()">
        ğŸ’¾ Guardar Ruta
      </button>

      <button class="control-btn trash-btn" (click)="limpiarMapa()" title="Limpiar mapa">
        ğŸ—‘ï¸
      </button>

      <button class="control-btn" (click)="zoomIn()" title="Acercar">
        â•
      </button>

      <button class="control-btn" (click)="zoomOut()" title="Alejar">
        â–
      </button>
    </div>

  </div> <!-- FIN RIGHT PANEL -->

</div> <!-- FIN CONTENEDOR PRINCIPAL -->
