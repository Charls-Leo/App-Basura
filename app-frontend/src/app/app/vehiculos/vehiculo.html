<!-- Elementos decorativos flotantes -->
<div class="floating-decoration">ğŸŒ¿</div>
<div class="floating-decoration">â™»ï¸</div>
<div class="floating-decoration">ğŸŒ±</div>

<!-- Header -->
<div class="header">
  <div class="logo-section">
    <span class="logo-icon">â™»ï¸</span>
    <span class="logo-text">EcoRecolecta</span>
  </div>
  <div class="page-title">ğŸš› GestiÃ³n de VehÃ­culos</div>
</div>

<!-- Contenedor -->
<div class="container">
  <div class="page-header">
    <h1>VehÃ­culos del perfil</h1>
    <p>Gestiona todos los vehÃ­culos de recolecciÃ³n con un estilo moderno</p>
  </div>

  <!-- Botones -->
  <div style="display: flex; gap: 15px; flex-wrap: wrap;">
    <button class="btn-add" (click)="openModal()">
      â• Nuevo VehÃ­culo
    </button>
    <button class="btn-add btn-reload" (click)="cargarVehiculos()">
      ğŸ”„ Recargar
    </button>
  </div>

  <!-- Lista -->
  <div class="vehicles-grid" *ngIf="vehiculos.length > 0">
    <div class="vehicle-card" *ngFor="let v of vehiculos">
      <div class="vehicle-icon">ğŸš›</div>

      <div class="vehicle-plate">{{ v.plate }}</div>

      <div class="vehicle-info">
        <div><strong>Marca:</strong> {{ v.brand }}</div>
        <div><strong>Modelo:</strong> {{ v.model }}</div>
        <div>
          <strong>Estado:</strong>
          <span [style.color]="getStatusColor(v.status)" style="font-weight: 600;">
            {{ v.status }}
          </span>
        </div>
      </div>

      <div class="vehicle-actions">
        <button class="btn-edit" (click)="openModal(v)">âœï¸ Editar</button>
        <button class="btn-delete" (click)="deleteVehicle(v.id)">ğŸ—‘ï¸ Eliminar</button>
      </div>
    </div>
  </div>

  <!-- Estado vacÃ­o -->
  <div class="empty-state" *ngIf="vehiculos.length === 0">
    <div class="empty-state-icon">ğŸš›</div>
    <h3>No hay vehÃ­culos registrados</h3>
    <p>Comienza agregando tu primer vehÃ­culo de recolecciÃ³n</p>
    <button class="btn-add" (click)="openModal()">
      â• Agregar Primer VehÃ­culo
    </button>
  </div>
</div>

<!-- Modal de feedback (Ã©xito / info / error) -->
<div class="feedback-backdrop" *ngIf="feedbackVisible">
  <div class="feedback-card">
    <div class="feedback-header">
      <div class="feedback-icon">{{ feedbackIcon }}</div>
      <h2 class="feedback-title">{{ feedbackTitle }}</h2>
      <button class="feedback-close" (click)="closeFeedback()">Ã—</button>
    </div>

    <p class="feedback-message">
      {{ feedbackMessage }}
    </p>

    <div class="feedback-actions">
      <button class="feedback-button" (click)="closeFeedback()">
        Aceptar
      </button>
    </div>
  </div>
</div>



<!-- Modal -->
<div class="modal" [class.active]="isModalOpen" (click)="closeModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>{{ getModalTitle() }}</h2>
      <button class="btn-close" (click)="closeModal()">Ã—</button>
    </div>

    <form (ngSubmit)="onSubmit()" #formRef="ngForm">
      <div class="form-group">
        <label>Placa</label>
        <input
          type="text"
          [(ngModel)]="vehicleForm.plate"
          name="plate"
          required
          maxlength="7"
          placeholder="ABC-123"
          style="text-transform: uppercase;"
          (input)="formatPlate($event)"
          [disabled]="modoEditar"
        >
      </div>

      <div class="form-group">
        <label>Marca</label>
        <input type="text" [(ngModel)]="vehicleForm.brand" name="brand" required>
      </div>

      <div class="form-group">
        <label>Modelo</label>
        <input type="text" [(ngModel)]="vehicleForm.model" name="model" required>
      </div>

      <div class="form-group">
        <label>Estado</label>
        <select [(ngModel)]="vehicleForm.status" name="status" class="form-select">
          <option value="Activo">Activo</option>
          <option value="Inactivo">Inactivo</option>
          <option value="Mantenimiento">En Mantenimiento</option>
        </select>
      </div>

      <button class="btn-submit" type="submit">
        {{ getSubmitButtonText() }}
      </button>
    </form>
  </div>
</div>
